(defun gen-makefile ()
    (interactive)
  (if (file-exists-p "Makefile")
    (let ((choices '("Append" "Overwrite")))
      (let ((choice (ido-completing-read "Choose Action: " choices )))
	(if (string= choice "Append")
	(print "A"))
	(if (string= choice "Overwrite")
	    (progn
	        (write-region "" "" "Makefile")
		(write-makefile)
	      )
	)
	)
      )

    (progn
	(make-empty-file "Makefile")
	(print "Makefile created.")
	(write-makefile)
	)
    )
  )

(defun write-makefile ()
    (with-temp-file "Makefile"
	(insert "CC = gcc\n")
	(insert "CFLAGS  = -g -Wall\n")
	)
    )
(call-interactively 'gen-makefile ())
